@{
    ViewData["Title"] = "Grover's Search Algorithm";
}

<link rel="stylesheet" href="~/css/home-index.css" asp-append-version="true" />

<div class="home-page">
    <div class="hero">
        <h1>Welcome</h1>
        <p>Explore interactive visualizations of Grover's Search Algorithm!</p>
    </div>

    <div class="content-card">
        <h2>About Grover's Search Algorithm</h2>
        <p>
            Grover's algorithm is a <span class="highlight">quantum algorithm</span> that provides a quadratic speedup 
            for unstructured search problems. It can find a marked item in an unsorted database of N items in 
            approximately <strong>√N steps</strong>, compared to N steps required by classical algorithms.
        </p>
        
        <h3>Visualizations:</h3>
        <p>Check out the visualization below to see how Grover's algorithm works step-by-step!</p>
        
        <div class="visualization-placeholder">
            <h3>Interactive Grover's Algorithm Visualization</h3>

            <div class="viz-controls">
                <label>
                    Database Size (N):
                    <input type="number" id="dbSize" value="8" min="4" max="10000" step="4">
                </label>
                <button id="resetBtn" class="viz-btn reset">Reset</button>
                <button id="stepBtn" class="viz-btn step">Run Iteration</button>
                <button id="autoBtn" class="viz-btn auto">Auto Run</button>
                <label>
                    Interval (ms):
                    <input type="number" id="autoInterval" value="300" min="50" step="50">
                </label>
            </div>

            <div class="viz-canvas-wrap">
                <div id="iterationInfo">
                    Iteration: 0 | Target Item: <span id="targetItem">?</span> | Status: Ready to search
                </div>
                <div id="searchStats" style="margin:6px 0; font-size:0.95rem;" class="text-white"></div>
                <canvas id="groverCanvas" width="1000" height="420"></canvas>
            </div>

            <div class="viz-explain">
                <h4>How it works:</h4>
                <p><strong>1.</strong> Initially, all items have equal probability (uniform superposition)</p>
                <p><strong>2.</strong> Each iteration amplifies the target item's probability</p>
                <p><strong>3.</strong> After ~√N iterations, the target has the highest probability</p>
                <p><strong>4.</strong> Classical search would need N/2 checks on average!</p>
            </div>
            
            <div id="commentsContainer" class="comments-section"></div>
            @await Html.PartialAsync("_CommentForm", new CST465_project.Models.CommentCreateDto { VisualizationId = 8 })
        </div>

        <div class="card mt-3">
            <div class="card-header">Save This Run</div>
            <div class="card-body">
                <div class="input-group mb-2">
                    <input type="text" id="vizName" class="form-control" placeholder="Enter a name for this run (e.g., 'Grovers 4-bit')" maxlength="100">
                </div>
                <div class="input-group mb-2">
                    <input type="text" id="vizDesc" class="form-control" placeholder="Optional description" maxlength="200">
                </div>
                <button id="btnSaveViz" class="btn btn-success" type="button">
                    Save Results
                </button>
                <div id="saveStatus" class="form-text mt-2"></div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @Html.AntiForgeryToken()
    <script src="~/js/home-comments.js" asp-append-version="true"></script>
    <script src="~/js/grover-visualization.js" asp-append-version="true"></script>
}